<style type="text/css">
    #table td {
        border-top: none;
    }
</style>
<form action="/tag" method="post" id="modal-form">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                aria-hidden="true">&times;</span></button>
        <h4 class="modal-title" id="myModalLabel">
            <a target="_blank"
               href="http://www.ncbi.nlm.nih.gov/pubmed/?term={{ article.pubMed_id }}">[{{ article.pubMed_id }}]</a>
            &nbsp;&nbsp;<b>{{ article.title }}</b>
        </h4>
    </div>
    <div class="modal-body">
        <table class="table" id="table">
            <tr>
                <td id="abstract">{{ article.abstract }}</td>
            </tr>
            <tr>
                <td><input type="text" class="form-control" placeholder="category" name="category"
                           value="{{ article.category }}"></td>
            </tr>
            <tr>
                <td><input name="terms" type="text" class="form-control" id="terms"
                           placeholder="Terms: use ',' to separate"
                           value="{{ article.terms }}"></td>
            </tr>
            <tr>
                <td>
                    <input type="text" class="form-control" placeholder="General: use ',' to separate"
                           name="general" value="{{ article.generals }}">
                    <input type="hidden" value="{{ article.pubMed_id }}" name="pubMed_id">
                </td>
            </tr>

            <tr>
                <td><input type="submit" class="btn btn-success btn-block" value="Save"></td>
            </tr>
        </table>
    </div>
</form>

<script type="application/javascript" src="/js/highlight.js"></script>
<script type="application/javascript">
    $("#modal-form").on({
        'submit': function (e) {
            $.ajax({
                url: "/tag",
                method: "post",
                dataType: 'json',
                data: $("#modal-form").serialize(),
                success: function (response) {
                    var pubmed_id = response.data.id;
                    $("#" + pubmed_id).html(response.data.category);
                    $("#" + pubmed_id).removeClass("btn-primary").addClass("btn-success");
                    $('#myModal').modal('hide');
                }
            })
            e.preventDefault();
        }
    })

{#    $("#terms").on({#}
{#        'keyup': function (e) {#}
{#            console.log($("#terms").val())#}
{#            var myHilitor = new Hilitor("#abstract");#}
{#            myHilitor.apply($("#terms").val());#}
{#        }#}
{#    })#}
</script>
